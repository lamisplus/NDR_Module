<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <property name="autoIncrement" value="true"/>
    <changeSet  failOnError="true" id="20230222-001" author="Dr Karim">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ndr_pusher"/>
            </not>
        </preConditions>
        <sql>
            CREATE TABLE IF NOT EXISTS public.ndr_pusher
            (
                id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
                code integer,
                batch_number character varying(100) COLLATE pg_catalog."default",
                de_message character varying COLLATE pg_catalog."default",
                message character varying(250) COLLATE pg_catalog."default",
                facility_id bigint,
                is_authenticated boolean,
                push_date date,
                CONSTRAINT pk_ndr_pusher PRIMARY KEY (id)
                )

                TABLESPACE pg_default;

            ALTER TABLE IF EXISTS public.ndr_pusher
                OWNER to postgres;
        </sql>
    </changeSet>

    <changeSet  failOnError="true" id="20230222-002" author="Dr Karim">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ndr_pusher_config"/>
            </not>
        </preConditions>
        <sql>
            CREATE TABLE IF NOT EXISTS public.ndr_pusher_config
            (
                id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
                facility_id bigint,
                username character varying(100) COLLATE pg_catalog."default",
                password character varying(100) COLLATE pg_catalog."default",
                CONSTRAINT pk_ndr_pusher_config PRIMARY KEY (id),
                CONSTRAINT facility_id UNIQUE (facility_id)
                )

                TABLESPACE pg_default;

            ALTER TABLE IF EXISTS public.ndr_pusher_config
                OWNER to postgres;
        </sql>
    </changeSet>
    <changeSet  failOnError="true" id="20230224-003b" author="Dr Karim">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="ndr_ndr_messages"/>
            </not>
        </preConditions>
        <sql>

    CREATE TABLE IF NOT EXISTS public.ndr_messages
    (
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    de_message character varying COLLATE pg_catalog."default",
    facility_id bigint,
    is_pushed boolean,
    message_date date,
    identifier character varying(100) COLLATE pg_catalog."default",
    CONSTRAINT pk_ndr_messages PRIMARY KEY (id)
    )

    TABLESPACE pg_default;

    ALTER TABLE IF EXISTS public.ndr_messages
    OWNER to postgres;
  </sql>
    </changeSet>
</databaseChangeLog>
